<div class="flex flex-col">
  <div class="flex items-center">
    <button (click)="backPage()" class="items-center flex gap-2 text-lg my-3">
      <i class="material-symbols-outlined">
        arrow_back
      </i>
      Back
    </button>
    <button class="btn-primary ml-auto mx-3" (click)="uploadContracts()">
      upload contracts
    </button>
  </div>
  <div class="overflow-x-auto sm:-mx-6 lg:-mx-8">
    <div class="inline-block min-w-full py-2 sm:px-6 lg:px-8">
      <div class="overflow-hidden">
        <table class="min-w-full text-left text-sm font-light border-y-2">
          <thead class="border-b font-medium ">
            <tr>
              <th scope="col" class="px-6 py-4">#</th>
              <th scope="col" class="px-6 py-4">Title</th>
              <th scope="col" class="px-6 py-4">Descriptions</th>
              <th scope="col" class="px-6 py-4">Contract IDs</th>
              <th scope="col" class="px-6 py-4">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr
              *ngFor="let contract of contracts?.slice((currentPage - 1) * itemsPerPage, currentPage * itemsPerPage); let i = index;"
              class="border-b transition duration-300 ease-in-out hover:bg-neutral-100">
              <td class="whitespace-nowrap px-6 font-medium border-r">{{ getIndex(i) }}</td>
              <td class="whitespace-nowrap px-6 border-r">{{ contract.title }}</td>
              <td class="whitespace-nowrap px-6 border-r">
                <ul>
                  <li *ngFor="let description of contract.descriptions" class="py-2">{{ description }}</li>
                </ul>
              </td>
              <td class="whitespace-nowrap px-6 border-r">
                <ul>
                  <li *ngFor="let contractId of contract.contractIds" class="py-2">{{ contractId }}</li>
                </ul>
              </td>
              <td class="whitespace-nowrap px-6">
                <div *ngFor="let contractId of contract.contractIds; let j = index" class="flex flex-row items-center">
                  <button class="border-black border-2 p-2 m-1 w-10 text-center" (click)="viewContract(contractId)">
                    #{{ getButtonNo(j) }}
                  </button>
                  <button class="px-4 " (click)="deleteContract(contractId)"><i
                      class="material-symbols-outlined text-red-600">
                      delete
                    </i></button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
  <div>
    <div class="flex gap-2 w-full justify-end">
      <button (click)="currentPage = currentPage - 1" [disabled]="currentPage === 1">
        <i class="material-symbols-outlined cursor-pointer">
          navigate_before
        </i>
      </button>
      <button class="page-link" *ngFor="let page of getPages()" (click)="currentPage = page" [ngClass]="{
        'page-link-active': currentPage === page
      }">{{page}}
      </button>
      <button (click)="currentPage = currentPage + 1" [disabled]="currentPage === getTotalPages()">
        <i class="material-symbols-outlined cursor-pointer">
          navigate_next
        </i>
      </button>
    </div>
  </div>
</div>