
<div class="div bg-gray-50 min-h-screen">

  <!-- Main View Canvas -->
  <div class="div-company-details w-full max-w-screen-2xl min-w-[780px]">
    <!-- Company Details section  -->
    <div class=" my-2 mx-1 h-fit bg-white p-2">
      <div class="flex">
        <!-- first box which contains the company details -->
        <form [formGroup]="profileForm" class="w-full">

          <div class="flex justify-between items-center w-full">
            <div class=" flex flex-row items-center w-full">
              <div class="relative px-1 py-2" id="company-logo">
                <img class="object-contain overflow-hidden w-14 h-14 rounded-full" src={{company_logo}} />
                <button (click)="showDiv = !showDiv"  matTooltip="Edit Company Profile" class="absolute bottom-0 right-0 cursor-pointer">
                  <i class="material-symbols-outlined text-sm text-CCblue pr-2 pb-1">border_color</i>
                </button>
                <!-- A hidden div for edit profile -->
                <div class="my-3 relative" [class.hidden]="!showDiv">
                  <div class="absolute top-0 left-0 shadow-md z-20">
                    <app-edit-profile></app-edit-profile>
                  </div>
                </div>
              </div>
              <!-- Sub box 1 -->
              <div class="flex flex-col w-full" id="sub-box2">
                <div class="font-bold whitespace-nowrap ml-4" style="font-size: 18px;">
                  {{name}}
                </div>
                <div class="flex flex-row justify-around w-full mt-4">
                  <div class="gray-highlights">
                    <i class="material-symbols-outlined font-bold mr-1 text-sm">
                      location_on</i>
                    {{address}}
                  </div>
                  <!-- Sub box 2 -->
                  <div class="div-sub-box">
                    <div class="gray-highlights">
                      <i class="material-symbols-outlined font-bold mr-2 text-sm">
                        Description</i>
                      {{licence_id}}
                    </div>
                  </div>
                  <!-- Sub box 3 -->
                  <div class="div-sub-box">
                    <div class="gray-highlights">
                      <i class="material-symbols-outlined font-bold mr-2 text-sm">
                        computer</i>
                      {{domain_address}}
                    </div>
                  </div>
                 


                  <!-- Ratings -->
                  <div class=" flex">
                    <div class="gray-highlights">
                      <i class="material-symbols-outlined font-bold mr-2 text-sm">
                        star</i>
                      {{rating}}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- {{usercount_list}} -->
            <div class="flex justify-end items-center">

              <div class="flex flex-row" id="summary-blocks">

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-md flex-col">{{usercount_list}}</span>
                    <p class="whitespace-nowrap flex-col text-[0.6rem]">Active Members</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-8 h-8">
                      <i class="material-symbols-outlined text-angel-blue-2 text-xl">
                        group
                      </i>
                    </div>
                  </div>
                </div>

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-md flex-col">100
                      <span class="text-black font-thin text-[0.6rem]">TEU</span></span>
                    
                    <p class="whitespace-nowrap flex-col text-[0.6rem]">Available slots</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-8 h-8">
                      <i class="material-symbols-outlined text-angel-blue-2 text-2xl">
                        workspaces
                      </i>
                    </div>
                  </div>
                </div>

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-md flex-col">100
                      <span class="text-black font-thin text-[0.6rem]">TEU</span>
                    </span>
                    <p class="whitespace-nowrap flex-col text-[0.6rem]">Available for lease</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-8 h-8">
                      <i class="material-symbols-outlined text-angel-blue-2 text-2xl">
                        event_available
                      </i>
                    </div>
                  </div>
                </div>

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-md flex-col">100
                      <span class="text-black font-thin text-[0.6rem]">TEU</span>
                    </span>
                    <p class="whitespace-nowrap flex-col text-[0.6rem]">Available for sale</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-8 h-8">
                      <i class="material-symbols-outlined text-angel-blue-2 text-2xl">
                        new_releases
                      </i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Availability boxes END -->
          </div>
        </form>
      </div>
    </div>
    <!-- Employee details section -->
    <hr class="m-2" />
    <div class="div-employee">
      
      <!--Change height to fit-->
      <div class="flex flex-row justify-start ml-2 gap-20">
        <div class="flex flex-col">
          <div class="flex items-center py-2">
            <i class="material-symbols-outlined text-xs text-black  mr-2">person</i>
            <div class="text-xs">Name</div>
          </div>
          <div class="font-semibold text-sm">{{fname}} {{lname}}</div>
        </div>
        <div class="flex flex-col">
          <div class="flex items-center py-2">
            <i class="material-symbols-outlined text-xs text-black mr-2">mail</i>
            <div class="text-xs">Email-Address</div>
          </div>
          <div class="font-semibold text-sm">{{email}}</div>
        </div>
        <div class="flex flex-col">
          <div class="flex items-center py-2">
            <i class="material-symbols-outlined text-xs text-black mr-2">phone</i>
            <div class="text-xs">Phone Number</div>
          </div>
          <div class="font-semibold text-sm">{{phone}}</div>
        </div>
        
      </div>
      <div class="flex flex-row ">
        <button class="div-action-button" (click)="onClick()">
          Approve Ads ({{adscount[1]}})
        </button>
        <button class="div-action-button">
          Sync Data
        </button>
        <button class="div-action-button" routerLink="/upload-contract">
          Upload Contracts
        </button>
        <button class="div-action-button" routerLink="/view-contract">
          View Contracts
        </button>

        <button class="div-action-button" routerLink="/upload-inventory">
          Upload Inventory
        </button>


      </div>

      <!-- <br>&nbsp;&nbsp;&nbsp; -->
      <div>
      </div>


    </div>

    <br>


    <div class="font-medium bg-gray-50 flex items-center px-10">
      <div class=" text-lg font-light justify-start">User Details</div>
      <div class="div-search my-2 border-2 justify-start mx-4">
        <div class="div-search-icon">
          <!-- search bar icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="pl-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="gray">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>

        <input class="input-search ml-3 " type="text" [(ngModel)]="searchTerm" id="search" placeholder="Search (eg. Name, Email, Mobile)" autocomplete="off"/>
      </div>
      <button mat-raised-button color="primary"
        class="bg-CCblue hover:bg-black-700 text-white py-3 rounded-none px-2 mr-4 h-1 font-light  ml-auto  justify-end w-fit "
        (click)="DisplayPostForm()">+ Add User</button>
    </div>
    <hr class="m-2" />


    <!-- Table start -->
    <div class="flex flex-col overflow-x-hidden ml-8">
        <div class="employee-list">
          <div class="overflow-x-auto">
            <table class="employee-table border-2">
              <thead class="emplist-thead">
                <tr>
                  <th scope="col" class="px-6 py-4 ml-20 border-r-2">First Name</th>
                  <th scope="col" class="px-6 py-4 border-r-2">Last Name</th>
                  <th scope="col" class="px-6 py-4 border-r-2">Email</th>
                  <th scope="col" class="px-6 py-4 border-r-2">Phone Number</th>
                  <th colspan="2" scope="col" class="px-6 py-4 border-r-2">&ensp;Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let u of alluser_list.slice((currentPage-1)*itemsPerPage, currentPage*itemsPerPage) | search: searchTerm" class="employee-add bg-white">
                  <td class="emplist ml-20 border-r-2">{{u.fname}}</td>
                  <td class="emplist border-r-2">{{u.lname}}</td>
                  <td class="emplist border-r-2">{{u.email}}</td>
                  <td class="emplist border-r-2">{{u.phone_no}}</td>
                  <td class="whitespace-nowrap px-6 py-4 border-r-2">
                    <a (click)="getUserByID(u.user_id)" class="text-CCblue">Edit</a>
                  </td>
                  <td class="whitespace-nowrap px-6 py-4">
                    <div *ngIf="alluser_list">
                      <div *ngIf="alluser_list.length === 0">
                        <p>No users added.</p>
                      </div>
                      <div *ngIf="alluser_list.length > 0">
                        <a routerLink="/profile" (click)="deleteUserById(u.user_id)" class="text-CCblue">Delete</a>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            
          </div>
        </div>
    </div>
    <div class="flex gap-2 w-full justify-end">
      <button  (click)="currentPage = currentPage - 1" [disabled]="currentPage === 1">
        <i class="material-symbols-outlined cursor-pointer">
          navigate_before
        </i>
      </button>

      <button class="page-link"
       *ngFor="let page of getPages()" (click)="currentPage = page"
       [ngClass]="{
        'page-link-active': currentPage === page
      }"
        >

           {{page}}
      </button>

      <button (click)="currentPage = currentPage + 1" [disabled]="currentPage === getTotalPages()">
        <i class="material-symbols-outlined cursor-pointer">
          navigate_next
        </i>
      </button>
    </div>
    <!-- Table end -->
  </div>
</div>