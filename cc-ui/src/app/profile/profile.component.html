<app-header></app-header>
<div class="div bg-gray-50 min-h-screen">
  <!-- Sidebar -->
  <app-sidebar class="div-app-sidebar"></app-sidebar>
  <!-- Main View Canvas -->
  <div class="div-company-details w-full max-w-screen-2xl min-w-[780px]">
    <!-- Company Details section  -->
    <div class=" m-2 shadow-md h-fit bg-white p-2">
      <div class="flex">
        <!-- first box which contains the company details -->
        <form [formGroup]="profileForm" class="w-full">

          <div class="flex justify-between items-center w-full">
            <div class="justify-start flex flex-row items-center">
              <div class="relative px-2 p-2" id="company-logo">
                <img class="object-contain overflow-hidden w-14 h-14 rounded-full bg-angel-blue" src={{company_logo}} />
                <button (click)="showDiv = !showDiv" class="absolute bottom-0 right-0 cursor-pointer">
                  <i class="material-symbols-outlined text-sm text-CCblue pr-2 pb-1">border_color</i>
                </button>
                <!-- A hidden div for edit profile -->
                <div class="my-3 relative" [class.hidden]="!showDiv">
                  <div class="absolute top-0 left-0 shadow-md z-20">
                    <app-edit-profile></app-edit-profile>
                  </div>
                </div>
              </div>
              <!-- Sub box 1 -->
              <div class="flex flex-col" id="sub-box2">
                <div class="div-company whitespace-nowrap">
                  {{name}}
                  <span class="div-company-name"></span>
                </div>
                <div class="flex flex-row">
                  <div class="gray-highlights">
                    <i class="material-symbols-outlined font-bold mr-2 text-sm">
                      location_on</i>
                    {{address}}
                  </div>
                  <!-- Sub box 2 -->
                  <div class="div-sub-box">
                    <div class="gray-highlights">
                      <i class="material-symbols-outlined font-bold mr-2 text-sm">
                        Description</i>
                      {{licence_id}}
                    </div>
                  </div>
                  <!-- Sub box 3 -->
                  <div class="div-sub-box">
                    <div class="gray-highlights">
                      <i class="material-symbols-outlined font-bold mr-2 text-sm">
                        computer</i>
                      {{domain_address}}
                    </div>
                  </div>
                  <div class="div-sub-box">
                    <div class="gray-highlights">
                      <i class="material-symbols-outlined font-bold mr-2 text-sm">
                        flag</i>
                      {{country}}
                    </div>
                  </div>


                  <!-- Ratings -->
                  <div class=" mx-[1rem] flex">
                    <div class="gray-highlights">
                      <i class="material-symbols-outlined font-bold mr-2 text-sm">
                        star</i>
                      {{rating}}
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- {{usercount_list}} -->
            <div class="flex justify-end items-center">

              <div class="flex flex-row" id="summary-blocks">

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-xl flex-col">{{usercount_list}}</span>
                    <p class="whitespace-nowrap flex-col">Active Members</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-10 h-10">
                      <i class="material-symbols-outlined text-angel-blue-2 text-2xl">
                        group
                      </i>
                    </div>
                  </div>
                </div>

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-xl flex-col">100</span>
                    <p class="whitespace-nowrap flex-col">Available slots</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-10 h-10">
                      <i class="material-symbols-outlined text-angel-blue-2 text-2xl">
                        workspaces
                      </i>
                    </div>
                  </div>
                </div>

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-xl flex-col">100</span>
                    <p class="whitespace-nowrap flex-col">Available for lease</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-10 h-10">
                      <i class="material-symbols-outlined text-angel-blue-2 text-2xl">
                        event_available
                      </i>
                    </div>
                  </div>
                </div>

                <div class="bg-angel-blue w-fit h-fit p-2 flex mx-1">
                  <div class="flex-1 flex flex-col">
                    <span class="text-angel-blue-2 font-bold text-xl flex-col">100</span>
                    <p class="whitespace-nowrap flex-col">Available for sale</p>
                  </div>
                  <div class="flex-1 items-center mt-auto pl-3 py-1 w-fit">
                    <div class="flex items-center justify-center rounded-full bg-pale-blue w-10 h-10">
                      <i class="material-symbols-outlined text-angel-blue-2 text-2xl">
                        new_releases
                      </i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- Availability boxes END -->
          </div>
        </form>
      </div>
    </div>
    <!-- Employee details section -->
    <hr class="m-2" />
    <div class="div-employee">
      
      <!--Change height to fit-->
      <div class="flex flex-row justify-start ml-2 gap-20">
        <div class="flex flex-col">
          <div class="text-xs">
            <i class="material-symbols-outlined text-xs text-black mt-2">person</i>
            Name
          </div>
          <div class="font-bold">{{fname}} {{lname}}</div>
        </div>
        <div class="flex flex-col">
          <div class="text-xs">
            <i class="material-symbols-outlined text-xs text-black mt-2">mail</i>
            Email-address
          </div>
          <div class="font-bold">{{email}}</div>
        </div>
        <div class="flex flex-col">
          <div class="text-xs">
            <i class="material-symbols-outlined text-xs text-black mt-2">person</i>
            Name
          </div>
          <div class="font-bold">{{phone}}</div>
        </div>
        
      </div>
      <div class="flex flex-row ml-2 ">
        <button class="div-action-button" (click)="onClick()">
          Approve Ads ({{adscount[1]}})
        </button>
        <button class="div-action-button">
          Sync Data
        </button>
        <button class="div-action-button" routerLink="/upload-contract">
          Upload Contracts
        </button>
        <button class="div-action-button" routerLink="/view-contract">
          View Contracts
        </button>

        <button class="div-action-button" routerLink="/upload-inventory">
          Upload Inventory
        </button>


      </div>

      <!-- <br>&nbsp;&nbsp;&nbsp; -->
      <div>
      </div>


    </div>

    <br>


    <div class="font-medium bg-gray-50 dark:bg-gray-50 border-2 flex justify-between items-center">
      <div class="ml-10 text-xl font-light">User Details</div>
      <div class="div-search my-2 -left-96 border-2 ">
        <div class="div-search-icon">
          <!-- search bar icon -->
          <svg xmlns="http://www.w3.org/2000/svg" class="pl-2 h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="gray">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
          </svg>
        </div>

        <input class="input-search ml-3 " type="text" [(ngModel)]="searchTerm" id="search" placeholder="Search (eg. Name, Email, Mobile)" />
      </div>
      <button mat-raised-button color="primary"
        class="bg-CCblue hover:bg-black-700 text-white py-3 mt-0 px-2 mr-4 h-1 font-light rounded-none"
        (click)="DisplayPostForm()">+ Add User</button>
    </div>


    <!-- Table start -->
    <div class="flex flex-col overflow-x-hidden ml-8">
      <div class="sm:-mx-6 lg:-mx-8">
        <div class="employee-list">
          <div class="overflow-x-auto">
            <table class="employee-table">
              <thead class="emplist-thead">
                <tr>

                  <th scope="col" class="px-6 py-4 ml-20">First Name</th>
                  <th scope="col" class="px-6 py-4">Last Name</th>
                  <th scope="col" class="px-6 py-4">Email</th>
                  <th scope="col" class="px-6 py-4">Phone Number</th>

                  <th colspan="2" scope="col" class="px-6 py-4">&ensp;Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let u of alluser_list.slice((currentPage-1)*itemsPerPage, currentPage*itemsPerPage) | search: searchTerm" class="employee-add bg-white">
                  <td class="emplist ml-20">{{u.fname}}</td>
                  <td class="emplist">{{u.lname}}</td>
                  <td class="emplist">{{u.email}}</td>
                  <td class="emplist">{{u.phone_no}}</td>
                  <td class="whitespace-nowrap px-6 py-4">
                    <a (click)="getUserByID(u.user_id)" class="text-CCblue">Edit</a>
                  </td>
                  <td class="whitespace-nowrap px-6 py-4">
                    <div *ngIf="alluser_list">
                      <div *ngIf="alluser_list.length === 0">
                        <p>No users added.</p>
                      </div>
                      <div *ngIf="alluser_list.length > 0">
                        <a routerLink="/profile" (click)="deleteUserById(u.user_id)" class="text-CCblue">Delete</a>
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="flex gap-2 w-full justify-end">
      <button  (click)="currentPage = currentPage - 1" [disabled]="currentPage === 1">
        <i class="material-symbols-outlined cursor-pointer">
          navigate_before
        </i>
      </button>

      <button class="page-link"
       *ngFor="let page of getPages()" (click)="currentPage = page"
       [ngClass]="{
        'page-link-active': currentPage === page
      }"
        >

           {{page}}
      </button>

      <button (click)="currentPage = currentPage + 1" [disabled]="currentPage === getTotalPages()">
        <i class="material-symbols-outlined cursor-pointer">
          navigate_next
        </i>
      </button>
    </div>
    <!-- Table end -->
  </div>
</div>