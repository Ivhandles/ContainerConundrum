<app-header class="header"></app-header>
<div class="div">



  <!-- Sidebar -->
  <div class="sidebar-container">
    <app-sidebar class="div-app-sidebar"></app-sidebar>
  </div>

  <div class="text-after-type-sidebar py-4">
    <p class="search-text">Filter as per your Requirements</p>
    <div class="search-type-container">
      <div class="search-buy-container" [ngClass]="{'selected': selectedOptions['search'] === 'Buy'}"
        (click)="toggleOption('search', 'Buy')">
        Buy
      </div>
      <div class="search-lease-container" [ngClass]="{'selected': selectedOptions['search'] === 'Sell'}"
        (click)="toggleOption('search', 'Sell')">
        Sell
      </div>
      &nbsp;
      <div class="search-lease-container" [ngClass]="{'selected': selectedOptions['search'] === 'Lease'}"
        (click)="toggleOption('search', 'Lease')">
        Lease
      </div>
      &nbsp;
      <div class="search-swap-container" [ngClass]="{'selected': selectedOptions['search'] === 'Swap'}"
        (click)="toggleOption('search', 'Swap')">
        Swap
      </div>
      &nbsp;
    </div>



    <br />



    <div class="flex flex-col">




      <p class="port-text">Port of Departure</p>
      <div class="port-input">







        <select class="page-input" style="height: 30px; width: 275px; padding: 0px;" [(ngModel)]="port_of_departure">





          <option *ngFor="let port of port_list" [value]="port.port_name">{{port.port_name}}</option>



        </select>



      </div>



      <p class="port-text">Port of Arrival</p>



      <div class="port-input ">







        <select class="page-input" style="height: 30px; width: 275px;padding: 0px;" [(ngModel)]="port_of_arrival">



          <option *ngFor="let port of port_list" [value]="port.port_name">{{port.port_name}}</option>



        </select>



      </div>











    </div>
    <br />
    <div>



      <div class="text-after-type-sidebar">



        <p class="port-text">Select View</p>



        <div class="search-type-container">



          <div class="view-map-box" [ngClass]="{'selected': selectedOptions['view'] === 'MAP'}"
            (click)="toggleOption('view', 'MAP')">



            MAP



          </div>



          <div class="view-list-box" [ngClass]="{'selected': selectedOptions['view'] === 'LIST'}"
            (click)="toggleOption('view', 'LIST')">



            LIST



          </div>



        </div>



      </div>
      <br/>
      <div class="map-view">
        <div *ngIf="selectedView === 'MAP' && showMapView" class="map-view">
          <app-view-other-ads-map-view
            [selectedDeparturePort]="selectedDeparturePort"
            [selectedArrivalPort]="selectedArrivalPort">
          </app-view-other-ads-map-view>
        </div>

      </div>

      <br />
      <div class="text-after-type-sidebar">
        <p class="port-text">Select Type</p>



        <div class="search-type-container">

          <div class="search-q1-container" [ngClass]="{'selected': selectedOptions['type'] === '20DC'}"
            (click)="toggleOption('type', '20DC')">

            20DC

          </div>

          <div class="search-q2-container" [ngClass]="{'selected': selectedOptions['type'] === '40DC'}"
            (click)="toggleOption('type', '40DC')">

            40DC

          </div>

          <div class="search-q2-container" [ngClass]="{'selected': selectedOptions['type'] === '45HQ'}"
            (click)="toggleOption('type', '45HQ')">

            45HQ

          </div>

          <div class="search-q-container" [ngClass]="{'selected': selectedOptions['type'] === '40HQ'}"
            (click)="toggleOption('type', '40HQ')">

            40HQ

          </div>

        </div>



        <br />
        <br />

        <div class="clear-search-container">
          <button (click)="clearOptions()" class="clear-color">Clear</button>&nbsp;
          <button (click)="searchAdvertisements()" class="seacrh-color">Search</button>
          <br />
          <p class="no-selection-message" *ngIf="showNoSelectionMessage">Select your requirement</p>



        </div>



        <div class="vertical-line"></div>




        <div class="advertisement-details h-[45rem] overflow-y-scroll bg-gray-50">




          <h2 class="mt-2">Advertisement Details</h2>
          <mat-progress-bar mode="buffer" *ngIf="isLoading"></mat-progress-bar>





          <br />
          <ng-container *ngFor="let ad of currentAds" class="flex justify-center items-center border">
            <div class="flex flex-col border-4 mx-2">
              <div class="p-1 flex flex-row items-center  justify-around">
                <div class="flex flex-row items-center">
                  <img [src]="companyLogos[ad.company_id]" [ngClass]="{'company-name': ad.status != 'accepted'}"
                    class="w-16 h-8 object-contain">

                  <div [ngClass]="{'company-name':  ad.status != 'accepted'}" class="font-bold whitespace-nowrap ml-8">
                    {{ companyNames[ad.company_id] }}</div>
                  <div class="gray-highlights ml-4" [ngClass]="{'company-name':  ad.status != 'accepted'}">
                    <i class="material-icons text-sm text-yellow-400">star</i>
                    {{ companyRating[ad.company_id] }}
                  </div>
                </div>



                <div class="gray-highlights" [ngClass]="{'company-name': ad.status != 'accepted'}">
                  <i class="material-icons text-xs mr-1">computer</i>
                  {{ companyDomain[ad.company_id] }}
                </div>

                <div class="gray-highlights" [ngClass]="{'company-name': ad.status != 'accepted'}">
                  <i class="material-icons text-xs mr-1">place</i>
                  {{ companyAddress[ad.company_id]}}
                </div>



                <div class="flex flex-row gap-1">
                  <button [disabled]="ad.status != 'accepted'"
                    [ngClass]="{'button-red-bg-list': ad.status === 'accepted', 'button-gray-bg-list': ad.status !== 'accepted'}"
                    class="whitespace-nowrap">Message</button>

                  <!-- <button class="button-no-bg-list whitespace-nowrap">Open Negotiation</button> -->
                </div>
                <button class="negotiation-button" [disabled]="DisableStartNegoBtn(ad.ad_id)"
                  [disabled]="NButtonDisabled" (click)="StartNegotiation(ad.ad_id)">Start Negotiation</button>



              </div>
              <hr class="mx-2">
              <div class="p-1 flex flex-row items-center gap-1 justify-around">
                <div class="flex justify-start">
                  <img src="../../assets/images/Container.png" class="bg-gray-50 p-1 w-10 h-10">
                  <div class="flex flex-col text-[0.6rem]">
                    <div class="flex flex-row gap-2">
                      <div class="flex flex-col">
                        <div>
                          <i class="material-icons mr-1 text-xs">place</i>Departure
                        </div>
                        <div class="gray-highlights">
                          {{ad.port_of_departure}}
                        </div>
                      </div>
                      <div class="flex flex-col">
                        <div>
                          <i class="material-icons mr-1 text-xs">place</i>Arrival
                        </div>
                        <div>
                          <div class="flex flex-row gap-1">
                            <div class="gray-highlights">{{ad.port_of_arrival}}</div>

                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="flex flex-col items-center">
                  <div class="items-center justify-center">
                    <i class="material-icons mr-1 text-xs">description</i>
                    <span class="text-[0.6rem]">Expiry Date</span>
                  </div>
                  <div class="text-xs font-bold">{{ ad.expiry_date | date:'dd MMMM yyyy' }}</div>
                </div>
                <div class="flex flex-col items-center">
                  <div class="items-center justify-center">
                    <i class="material-icons mr-1 text-xs">inventory_2</i>
                    <span class="text-[0.6rem]">Quantity</span>
                  </div>
                  <div class="text-xs font-bold">{{ad.quantity}}</div>
                </div>



                <div class="flex flex-col items-center">
                  <div class="items-center justify-center">
                    <i class="material-icons mr-1 text-xs">inventory_2</i>
                    <span class="text-[0.6rem]">Type of Ad</span>
                  </div>
                  <div class="text-xs font-bold">{{ad.type_of_ad}}</div>
                </div>
                <div class="flex flex-col items-center">
                  <div class="items-center justify-center">
                    <i class="material-icons mr-1 text-xs">payments</i>
                    <span class="text-[0.6rem]">Price</span>
                  </div>
                  <div class="text-xs font-bold">{{ad.price}}</div>
                </div>


                <div class="flex flex-col items-center">
                  <div class="items-center justify-center">
                    <i class="material-icons mr-1 text-xs">event_available</i>
                    <span class="text-[0.6rem]">Free Days</span>
                  </div>
                  <div class="text-xs font-bold">{{ad.free_days}}</div>
                </div>
                <div class="flex flex-col items-center">
                  <div class="items-center justify-center">
                    <i class="material-icons mr-1 text-xs">event_available</i>
                    <span class="text-[0.6rem]">Per Diem</span>
                  </div>
                  <div class="text-xs font-bold">{{ad.per_diem}}</div>
                </div>
                <div class="flex flex-col items-center">
                  <div class="items-center justify-center">
                    <i class="material-icons mr-1 text-xs">event_available</i>
                    <span class="text-[0.6rem]">Pickup Charges</span>
                  </div>
                  <div class="text-xs font-bold">{{ad.pickup_charges}}</div>
                </div>


              </div>
            </div>
            <div>

              <div class="bg-gray-50 ml-0 mr-0">&nbsp;&nbsp;
              </div>

            </div>

          </ng-container>

          <div class="bg-gray-50 p-2 flex items-center flex-wrap  justify-center" *ngIf="this.ads.length>0">



            <nav aria-label="Page navigation">



              <ul class="inline-flex">



                <li><button [class.opacity-50]="currentPage === totalPages" (click)="currentPage ===1"
                    (click)="prevPage() " [hidden]="currentPage<2"
                    class="h-10 px-5 text-blue-600 transition-colors duration-150 rounded-l-lg focus:shadow-outline hover:bg-blue-100">



                    <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">



                      <path
                        d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"
                        clip-rule="evenodd" fill-rule="evenodd"></path>



                    </svg></button>



                </li>



                <li><button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage"
                    (click)="prevPage()" *ngIf="currentPage>1" [hidden]="currentPage<2"
                    class="h-10 px-5 text-black  transition-colors duration-150 focus:shadow-outline hover:bg-CCblue">{{currentPage
                    - 1}}</button>



                </li>



                <li><button
                    class="h-10 px-5 text-blue transition-colors duration-150 border-2 border-r-2 order-blue-400 focus:shadow-outline"
                    *ngIf="totalPages!=1">{{currentPage}}</button>



                </li>



                <li><button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage"
                    (click)="nextPage()" [hidden]="currentPage>=totalPages"
                    class="h-10 px-5 text-blue-600 transition-colors  rounded-r-lg duration-150 focus:shadow-outline hover:bg-blue-100">{{currentPage+1}}</button>



                </li>



                <li><button [class.opacity-50]="currentPage === totalPages" (click)="currentPage = currentPage"
                    (click)="nextPage()" [hidden]="currentPage>=totalPages"
                    class="h-10 px-5 text-blue-600 transition-colors duration-150 bg-white rounded-r-lg focus:shadow-outline hover:bg-blue-100">



                    <svg class="w-4 h-4 fill-current" viewBox="0 0 20 20">



                      <path
                        d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"
                        clip-rule="evenodd" fill-rule="evenodd"></path>



                    </svg>



                  </button>



                </li>



              </ul>



            </nav>



          </div>

        </div>